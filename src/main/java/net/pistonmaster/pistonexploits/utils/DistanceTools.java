package net.pistonmaster.pistonexploits.utils;

import org.apache.commons.lang3.tuple.ImmutablePair;
import org.bukkit.Location;
import org.bukkit.entity.Player;

import java.util.Optional;

public class DistanceTools {
    public static Optional<ImmutablePair<Double, Player>> getClosestPlayer(Location loc, int radius) {
        double smallestDistance = radius + 1D;
        Player nearestPlayer = null;

        for (Player player : loc.getNearbyPlayers(radius)) {
            double distance = loc.distance(player.getLocation());

            if (distance < smallestDistance) {
                smallestDistance = distance;
                nearestPlayer = player;
            }
        }

        if (nearestPlayer != null) {
            return Optional.of(ImmutablePair.of(smallestDistance, nearestPlayer));
        }

        return Optional.empty();
    }
}
